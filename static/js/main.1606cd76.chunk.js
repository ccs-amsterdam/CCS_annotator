(this.webpackJsonpamcat4annotator=this.webpackJsonpamcat4annotator||[]).push([[0],{255:function(e,t){},257:function(e,t){},286:function(e,t,n){var r={"./bg-BG.json":287,"./ca-ES.json":288,"./cs-CZ.json":289,"./de-DE.json":290,"./en-US.json":197,"./es-ES.json":291,"./et-EE.json":292,"./fi-FI.json":293,"./fr-FR.json":294,"./he-IL.json":295,"./it-IT.json":296,"./ja-JP.json":297,"./ko-KR.json":298,"./nb-NO.json":299,"./nn-NO.json":300,"./pl-PL.json":301,"./pt-BR.json":302,"./ru-RU.json":303,"./sv-SE.json":304,"./tr-TR.json":305,"./zh-CN.json":306};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=286},308:function(e,t,n){},310:function(e,t,n){"use strict";n.r(t);n(233);var r=n(0),a=n.n(r),o=n(52),i=n.n(o),c=n(80),s=n(16),u=n(10),l=n(339),d=n(9),j=n.n(d),f=n(15),b=n(12),p=n(335),h=n(337),v=n(311),O=n(203),g=n(204),x=n.n(g),m=n(119),k=n(14),w=n(205),y=n(206),C=n(53),S=n(164),E=n.n(S),T=function(){function e(){Object(w.a)(this,e),this.idb=new C.a("AmCAT_Annotator"),this.idb.version(1).stores({apis:"api",codingjobs:"job_id, name",documents:"doc_id, job_id"})}return Object(y.a)(e,[{key:"addToken",value:function(e,t){return this.idb.apis.put({api:e,token:t.token,refresh_token:t.refresh_token,expiration_date:t.expiration_date})}},{key:"deleteToken",value:function(e){return this.idb.apis.delete(e)}},{key:"getToken",value:function(e){return this.idb.apis.get(e)}},{key:"createCodingjob",value:function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E()([t,Date.now().toString()]),this.idb.codingjobs.add({job_id:n,name:t}),e.abrupt("return",{job_id:n,name:t});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCodingjob",value:function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listDocuments(t);case 2:return n=e.sent,e.next=5,this.deleteDocuments(n);case 5:return e.abrupt("return",this.idb.codingjobs.delete(t.job_id));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listCodingjobs",value:function(){return this.idb.codingjobs.toArray()}},{key:"getCodingjob",value:function(e){return this.idb.codingjobs.get(e.job_id)}},{key:"createDocuments",value:function(){var e=Object(f.a)(j.a.mark((function e(t,n){var r,a,o,i,c,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.t0=Set,e.next=4,this.idb.documents.where("job_id").equals(t.job_id).primaryKeys();case 4:return e.t1=e.sent,a=new e.t0(e.t1),o=0,i=n.reduce((function(e,n){var r=E()([n,t]);if(a.has(r))o++;else{if(a.add(r),n.annotations&&n.annotations.length>0)try{JSON.parse(n.annotations)}catch(i){throw alert("Annotations field contains invalid JSON"),new Error("JSON parse error")}e.push(Object(k.a)({doc_id:r,job_id:t.job_id},n))}return e}),[]),r||(c="Created ".concat(n.length-o," new documents in codingjob ").concat(t.name,"."),o>0&&(c+=" Ignored ".concat(o," duplicates")),alert(c)),e.abrupt("return",this.idb.documents.bulkAdd(i));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteDocuments",value:function(e){var t=e.map((function(e){return e.doc_id}));return this.idb.documents.bulkDelete(t)}},{key:"listDocuments",value:function(e){return this.idb.documents.where("job_id").equals(e.job_id).toArray()}},{key:"getDocument",value:function(e){return this.idb.documents.get(e)}},{key:"writeValue",value:function(e,t,n){return this.idb.documents.where("doc_id").equals(e.doc_id).modify(Object(m.a)({},t,n))}},{key:"deleteDB",value:function(){return this.idb.delete()}}]),e}(),R=n(2);function _(e){var t=e.totalRows,n=e.completedRows;console.log("Progress: ".concat(n," of ").concat(t," rows completed"))}var D=function(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),n=t[0],a=t[1],o=function(){var e=Object(f.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new T,e.next=4,Object(O.a)(t.idb,{filter:function(e,t,n){return"codingjobs"===e||"documents"===e},prettyJson:!0,progressCallback:_});case 4:n=e.sent,x()(n,"AmCAT_Annotator.json"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(""+e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(R.jsxs)(p.a,{closeIcon:!0,open:n,trigger:Object(R.jsx)(l.a.Item,{icon:"download",name:"Download",style:{color:"lightgreen"}}),onClose:function(){return a(!1)},onOpen:function(){return a(!0)},children:[Object(R.jsx)(h.a,{icon:"download",content:"Download everything"}),Object(R.jsx)(p.a.Content,{children:Object(R.jsx)("p",{children:"Download all data as a single JSON dump"})}),Object(R.jsx)(p.a.Actions,{children:Object(R.jsx)(v.a,{primary:!0,onClick:o,children:"Download"})})]})},A=function(e){return{type:"SET_DB",payload:e}},N=function(e){return{type:"BLOCK_EVENTS",payload:e}},z=function(e){return{type:"SELECT_CODINGJOB",payload:e}},I=function(e){return{type:"SET_CODINGJOBS",payload:e}},L=function(e){return{type:"SET_DOCUMENTS",payload:e}},B=function(e){return{type:"SET_CURRENT_TOKEN",payload:e}},P=function(e,t){return{type:"SET_TOKEN_SELECTION",index:e,add:t}},F=function(e){return{type:"TRIGGER_CODESELECTOR",payload:e}},G=function(e){return{type:"TOGGLE_ANNOTATIONS",payload:e}},K=n(70),H=function(e){var t=e.homepage,n=Object(u.c)((function(e){return e.db})),a=Object(u.b)(),o=Object(r.useState)(!1),i=Object(b.a)(o,2),c=i[0],d=i[1],O=Object(s.g)();if(!n)return null;var g=function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.deleteDB();case 3:a({type:"RESET_DB"}),d(!1),O.push(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(R.jsxs)(p.a,{closeIcon:!0,open:c,trigger:Object(R.jsx)(l.a.Item,{icon:"rocket",name:"Reset",style:{color:"#d7a3a3"}}),onClose:function(){return d(!1)},onOpen:function(){return d(!0)},children:[Object(R.jsx)(h.a,{icon:"power off",content:"Reset Annotator Database"}),Object(R.jsx)(p.a.Content,{children:Object(R.jsx)("p",{children:"This will remove all document and annotation data from your browser. Any annotations that have not been saved/synchronized will be lost. Are you absolutely sure?"})}),Object(R.jsxs)(p.a.Actions,{children:[Object(R.jsxs)(v.a,{color:"red",onClick:function(){d(!1)},children:[Object(R.jsx)(K.a,{name:"remove"})," No"]}),Object(R.jsxs)(v.a,{color:"green",onClick:g,children:[Object(R.jsx)(K.a,{name:"checkmark"})," Yes"]})]})]})};function M(){return J.apply(this,arguments)}function J(){return(J=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:t=e.sent,e.t0=t,e.next="never"===e.t0?6:"persisted"===e.t0?8:"prompt"===e.t0?10:12;break;case 6:return console.log("Not possible to persist storage"),e.abrupt("break",13);case 8:return console.log("Successfully persisted storage silently"),e.abrupt("break",13);case 10:return console.log("Not persisted, but we may prompt user when we want to."),e.abrupt("break",13);case 12:console.log("compiler desperately wanted a default");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return U.apply(this,arguments)}function U(){return(U=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.storage;case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=navigator.storage.persist;case 5:if(!e.t0){e.next=9;break}e.t1=navigator.storage.persist(),e.next=10;break;case 9:e.t1=void 0;case 10:return e.abrupt("return",e.t1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return Y.apply(this,arguments)}function Y(){return(Y=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.storage;case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=navigator.storage.persisted;case 5:if(!e.t0){e.next=9;break}e.t1=navigator.storage.persisted(),e.next=10;break;case 9:e.t1=void 0;case 10:return e.abrupt("return",e.t1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return Z.apply(this,arguments)}function Z(){return(Z=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.storage&&navigator.storage.persisted){e.next=2;break}return e.abrupt("return","never");case 2:return e.next=4,navigator.storage.persisted();case 4:if(!e.sent){e.next=7;break}return e.abrupt("return","persisted");case 7:if(navigator.permissions&&navigator.permissions.query){e.next=9;break}return e.abrupt("return","prompt");case 9:return e.next=11,navigator.permissions.query({name:"persistent-storage"});case 11:if("granted"!==(t=e.sent).state){e.next=21;break}return e.next=15,navigator.storage.persist();case 15:if(!e.sent){e.next=20;break}return e.abrupt("return","persisted");case 20:throw new Error("Failed to persist");case 21:if("prompt"!==t.state){e.next=23;break}return e.abrupt("return","prompt");case 23:return e.abrupt("return","never");case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!1),i=Object(b.a)(o,2),c=i[0],s=i[1];Object(r.useEffect)((function(){c||V().then(s)}),[c]);var u=function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return e.next=4,V();case 4:e.sent?(s(!0),alert("indexedDB set to persistent for AmCAT Annotator")):alert("Failed to set indexedDB to persistent");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c?null:Object(R.jsxs)(p.a,{closeIcon:!0,open:n,trigger:Object(R.jsx)(l.a.Item,{icon:"database",name:"Enable persitance",style:{color:"#d7a3a3"}}),onClose:function(){return a(!1)},onOpen:function(){return a(!0)},children:[Object(R.jsx)(h.a,{icon:"database",content:"Set database persistence"}),Object(R.jsxs)(p.a.Content,{children:[Object(R.jsx)("p",{children:"We did not have permission to automatically make the data storage for this website persistent. This means that the data could be removed automatically by your browser if it needs to free up space for another website. You can try to set this manually here, but not all browsers support this (yet)."}),Object(R.jsx)("p",{children:"If the database is not persistent the app can still be used, but you need to be more carefull in making sure that data is regularly backed up, either by manually downloading data or syncing with some backend (work in progress)."})]}),Object(R.jsx)(p.a.Actions,{children:Object(R.jsxs)(v.a,{onClick:u,children:[Object(R.jsx)(K.a,{name:"checkmark"})," Yes"]})})]})},Q=Object(s.i)((function(e){var t=e.items,n=(e.host,e.homepage),r=Object(u.c)((function(e){return e.db})),a=Object(s.h)(),o=t.map((function(e,t){return Object(R.jsx)(l.a.Item,{index:t,as:c.b,to:e.path,header:0===t,disabled:!r,active:e.path===a.pathname,children:e.label},"item-"+t)}));return Object(R.jsxs)(l.a,{fixed:"top",inverted:!0,children:[o,Object(R.jsxs)(l.a.Menu,{position:"right",children:[Object(R.jsx)(D,{}),Object(R.jsx)($,{}),Object(R.jsx)(H,{homepage:n})]})]})})),X=n(331),ee=n(330),te=n(342),ne=n(340),re=[{title:"GL en PvdA hebben goed gesprek met informateur, maar wantrouwen Rutte",text:'PvdA-leider Lilianne Ploumen en GroenLinks-leider Jesse Klaver hadden vrijdag een goed gesprek met informateur Herman Tjeenk Willink, zeiden ze zelf. De twee benadrukten dat, hoewel er inhoudelijke stappen zijn gezet, hun vertrouwen in VVD-leider Mark Rutte nog niet is hersteld.\n\n    Informateur Willink zette zich vrijdag aan zijn taak. Eerste punt op de agenda zijn gesprekken met de lijsttrekkers van de acht grootste partijen.\n    \n    Een week nadat een groot deel van de partijleiders bekendmaakte niet meer met Rutte verder te willen onderhandelen over een nieuwe coalitie, wordt gekeken waarover partijen het inhoudelijk eens zijn.\n    \n    "Het was een prettig gesprek langs de lijnen van de inhoud", zei PvdA-leider Lilianne Ploumen na afloop. Ze heeft haar zorgen over de ongelijkheid in Nederland en over de zorg gedeeld.\n    \n    Ook Jesse Klaver (GroenLinks), die een uur eerder op gesprek kwam bij de informateur, benadrukte dat het ging over de problemen die opgelost moeten worden.\n    \n    Situatie niet veranderd in een week\n\nWat betreft de positie ten opzichte van Rutte is echter niets veranderd. Vorige week ondertekenden Ploumen en Klaver net als alle andere oppositiepartijen een motie van wantrouwen, vanwege Ruttes betrokkenheid bij de notitie over CDA-Kamerlid Pieter Omtzigt.\n\n"Als het aan ons ligt, was Rutte geen premier meer", zei Ploumen. Hoe Tjeenk Willink dat gedeukte vertrouwen kan herstellen, weet ze niet. "We wachten de voorstellen van de informateur af."\n\n"De vertrouwensbreuk is niet hersteld na \xe9\xe9n gesprek met de fractievoorzitters", zei ook Klaver. "Mijn mening over Rutte is niet veranderd."\n\nSP\'er Lilian Marijnissen sprak zich al eerder expliciet uit tegen samenwerking met Rutte.\n\nDe partijleiders hekelen het gebrek aan openheid en transparantie waar Rutte in hun ogen voor staat. "Als je een fout maakt, dan moet je dat toegeven en er niet over liegen", zei Klaver. Ploumen: "Het probleem is dat Mark Rutte heeft gelogen. Wij hebben het vertrouwen in hem opgezegd."\n\nWat de vervolgstappen moeten zijn, laten ze volledig over aan Tjeenk Willink. "Ik ga geen lijstjes maken met wat er moet gebeuren", zei Ploumen.\n\nDe informateur ontvangt later op vrijdag nog de partijleiders Wopke Hoekstra (CDA) en Sigrid Kaag (D66), en Rutte zelf.\n\nTjeenk Willink denkt niet dat Rutte zomaar door kan\n\nTjeenk Willink suggereerde woensdag op een persconferentie dat hij Rutte niet per se een sta-in-de-weg voor een verandering van de bestuursstijl in Den Haag vindt. Toen daarover vervolgens berichten in de media verschenen, voelde de informateur zich vrijdag genoodzaakt die boodschap bij te sturen.\n\nDe conclusie dat Rutte geen belemmering vormt voor de formatie, kan hij niet voor zijn rekening nemen, luidt een schriftelijke verklaring.\n\nTjeenk Willink heeft namelijk ook de opdracht om te onderzoeken "of en zo ja onder welke voorwaarden er voldoende vertrouwen tussen partijen bestaat of weer kan ontstaan".'},{title:"CU-leider Segers vindt dat uitspraak over Rutte te veel op de man was gespeeld",text:'Partijleider Gert-Jan Segers van de ChristenUnie (CU) vindt dat hij te veel op de man heeft gespeeld door coalitiedeelname uit te sluiten als VVD-leider Mark Rutte opnieuw premier zou worden. Terugblikkend zegt hij dat het niet om \xe9\xe9n persoon moet gaan, maar om "een ongezonde politieke cultuur en een genadeloze overheid". Daar moet volgens hem verandering in komen, zo zei hij zaterdag tijdens een congres van de partij.\n\n    \n    Segers deed zijn uitspraak over Rutte na het debat over de notitie "functie elders" voor CDA-Kamerlid Pieter Omtzigt. Binnen de CU is verdeeldheid ontstaan over het besluit van de fractie, erkent Segers.\n    \n    Naast steun is er ook kritiek van veel leden, die zeggen dat hij "te veel op de man heeft gespeeld en te weinig de bal". "Te veel Rutte, te weinig ons allemaal. En als dat de perceptie van veel mensen is, dan moet ik me dat aantrekken", aldus Segers tijdens het congres.\n    \n    \n    Volgens de CU-leider staat "de politieke cultuur in Den Haag natuurlijk niet los van Mark Rutte, zeker niet".\n    \n    "Maar die oude cultuur staat of valt niet met \xe9\xe9n man. Ook wijzelf maken er deel van uit. Ik wil niet genadeloos zijn voor personen, maar ik wil wel hard en helder zijn over een cultuur die niet deugt en een genadeloze overheid. Daar moet \xe9cht een omslag in komen", zei Segers.\n    \n    \n    De ChristenUnie heeft vijf zetels in de Tweede Kamer. Op het congres werden vier oude Kamerleden uitgezwaaid en trad Ankie van Tatenhove aan als nieuwe partijvoorzitter.'}],ae=function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createCodingjob("Demo codingjob");case 3:return n=e.sent,e.next=6,t.createDocuments(n,re,!0);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){var t=e.items,n=Object(u.b)(),r=Object(s.g)(),a=function(){var e=Object(f.a)(j.a.mark((function e(){var a,o,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!(i.length>0&&void 0!==i[0])||i[0],e.prev=1,o=new T,!a){e.next=6;break}return e.next=6,ae(o);case 6:return n(A(o)),e.next=9,M();case 9:r.push(t[0].path),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return C.a.exists("AmCAT_Annotator").then((function(e){e&&a(!1)})),Object(R.jsx)(te.a,{inverted:!0,textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(R.jsx)(te.a.Column,{style:{maxWidth:450},children:Object(R.jsxs)(ne.a,{style:{border:0},children:[Object(R.jsx)(h.a,{as:"h2",textAlign:"center",children:"Welcome to the AmCAT annotator"}),Object(R.jsx)("p",{children:"This is the (early development version of the) AmCAT annotator. The fact that you see this message means that you're either here for the first time, or your local annotation database was reset (by you or your browser)."}),Object(R.jsx)("p",{children:"The annotator stores your codingjobs and annotations on your local computer in your browser's IndexedDB. Your data will only actually touch the internet when you synchronize your data."}),Object(R.jsx)(v.a,{primary:!0,onClick:a,children:"Yes, off course I trust you"})]})})})},ie=n(219),ce=function(e){var t=e.Component,n=e.homepage,a=Object(ie.a)(e,["Component","homepage"]),o=Object(r.useState)(!0),i=Object(b.a)(o,2),c=i[0],l=i[1],d=Object(r.useState)(!1),p=Object(b.a)(d,2),h=p[0],v=p[1],O=Object(u.b)();return function(){var e=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.exists("AmCAT_Annotator");case 2:if(!e.sent){e.next=11;break}return e.next=6,new T;case 6:t=e.sent,O(A(t)),v(!0),e.next=12;break;case 11:v(!1);case 12:l(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),Object(R.jsx)(s.b,Object(k.a)(Object(k.a)({},a),{},{render:function(e){return c?Object(R.jsx)("div",{children:"loading..."}):h?Object(R.jsx)(t,Object(k.a)(Object(k.a)({},a),e)):Object(R.jsx)(s.a,{to:n})}}))},se=n(113),ue=n(112),le=n(209),de=n(103),je=n(92),fe=n(345),be=n(108),pe=n(168),he=n(343),ve=function(e){var t=e.preGlobalFilteredRows,n=e.globalFilter,r=e.setGlobalFilter,a=t&&t.length;return Object(R.jsx)("span",{children:Object(R.jsx)("input",{value:n||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Search ".concat(a," records..."),style:{border:"0"}})})},Oe=function(e){var t=e.columns,n=e.data,a=e.selectedRow,o=e.setSelectedRow,i=e.width,c=void 0===i?null:i,s=e.defaultSize,u=void 0===s?15:s,l=e.sizeSelector,d=void 0!==l&&l,j=Object(r.useState)(a?a.ROW_ID:null),f=Object(b.a)(j,2),p=f[0],h=f[1],v=Object(ue.useTable)({columns:t,data:n,initialState:{pageSize:u,globalFilter:""}},ue.useGlobalFilter,ue.useSortBy,ue.usePagination),O=v.getTableProps,g=v.getTableBodyProps,x=v.headerGroups,m=v.prepareRow,w=v.page,y=v.pageCount,C=v.gotoPage,S=v.setPageSize,E=v.preGlobalFilteredRows,T=v.setGlobalFilter,_=v.state,D=_.pageIndex,A=_.globalFilter;Object(r.useEffect)((function(){h(a?a.ROW_ID:null)}),[a]);var N=function(e){return e.headers.map((function(e){return Object(R.jsxs)(le.a,Object(k.a)(Object(k.a)({className:e.headerClass},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(R.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))};return 0===n.length?null:Object(R.jsxs)("div",{style:{width:c},children:[Object(R.jsx)(ve,{preGlobalFilteredRows:E,globalFilter:A,setGlobalFilter:T}),Object(R.jsxs)(fe.a,Object(k.a)(Object(k.a)({unstackable:!0,striped:!0,fixed:!0,singleLine:!0,selectable:!0},O()),{},{children:[Object(R.jsx)(be.a,{children:x.map((function(e){return Object(R.jsx)(de.a,Object(k.a)(Object(k.a)({},e.getHeaderGroupProps()),{},{children:N(e)}))}))}),Object(R.jsx)(pe.a,Object(k.a)(Object(k.a)({},g()),{},{children:function(e){return e.map((function(e,t){return m(e),Object(R.jsx)(de.a,Object(k.a)(Object(k.a)({active:!!p&&p===e.id,onClick:function(){return function(e){p&&p===e.id?(o(null),h(null)):(o(Object(k.a)(Object(k.a)({},n[e.id]),{},{ROW_ID:e.id})),h(e.id))}(e)}},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(R.jsx)(je.a,Object(k.a)(Object(k.a)({title:e.value},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}(w)}))]})),d?Object(R.jsx)(se.a,{text:"show per page",options:[10,25,50,100,500].map((function(e){return{value:e,text:e}})),onChange:function(e,t){S(t.value)}}):null,Object(R.jsx)("div",{style:{marginTop:"3em",display:"flex",justifyContent:"flex-end"},children:n.length>u?Object(R.jsx)(he.a,{style:{border:"0"},size:"mini",firstItem:!1,lastItem:!1,nextItem:!1,prevItem:!1,boundaryRange:1,ellipsisItem:{content:Object(R.jsx)(K.a,{name:"ellipsis horizontal"}),icon:!0},activePage:D+1,totalPages:y,onPageChange:function(e,t){C(t.activePage-1)}}):null})]})},ge=n(333),xe=n(341),me=n(329),ke=function(){var e=Object(u.c)((function(e){return e.codingjobs})),t=Object(u.b)(),n=Object(r.useState)("inactive"),a=Object(b.a)(n,2),o=a[0],i=a[1],c=Object(r.useState)(""),s=Object(b.a)(c,2),l=s[0],d=s[1],O=function(){var e=Object(f.a)(j.a.mark((function e(n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),d(l.trim()),i("pending"),e.prev=3,r=new T,e.next=7,r.createCodingjob(l);case 7:return e.next=9,r.listCodingjobs();case 9:a=e.sent,t(z(null)),t(I(a)),i("inactive"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0),i("error");case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}();return e?Object(R.jsxs)(p.a,{as:ge.a,trigger:Object(R.jsxs)(v.a,{children:[Object(R.jsx)(K.a,{name:"plus"}),"Create job"]}),onSubmit:function(e){return O(e)},open:"inactive"!==o,onClose:function(){return i("inactive")},onOpen:function(){d(""),i("awaiting input")},size:"tiny",children:[Object(R.jsx)(h.a,{icon:"pencil",content:"Create new Codingjob",as:"h2"}),Object(R.jsx)(p.a.Content,{children:Object(R.jsx)(ge.a.Group,{children:Object(R.jsx)(ge.a.Input,{width:12,label:"Name",required:!0,type:"text",value:l,onChange:function(e,t){i("awaiting input"),d(t.value)},placeholder:"Enter name"})})}),Object(R.jsxs)(p.a.Actions,{children:["error"===o?Object(R.jsx)("div",{children:"Could not create codingjob for a reason not yet covered in the error handling..."}):null,"pending"===o?Object(R.jsx)(xe.a,{active:!0,inverted:!0,children:Object(R.jsx)(me.a,{content:"Creating codingjob"})}):Object(R.jsx)(v.a,{type:"submit",color:"green",icon:"save",content:"Create"})]})]}):null},we=function(){var e=Object(u.c)((function(e){return e.codingjob})),t=Object(u.b)(),n=Object(r.useState)("inactive"),a=Object(b.a)(n,2),o=a[0],i=a[1],c=function(){var n=Object(f.a)(j.a.mark((function n(r){var a,o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i("pending"),n.prev=1,a=new T,n.next=5,a.deleteCodingjob(e);case 5:o=a.listCodingjobs(),t(z(null)),t(I(o)),i("inactive"),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),console.log(n.t0),i("error");case 15:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}();return e?Object(R.jsxs)(p.a,{closeIcon:!0,open:"inactive"!==o,trigger:Object(R.jsxs)(v.a,{name:"logout",children:[Object(R.jsx)(K.a,{name:"minus"})," Delete job"]}),onClose:function(){i("inactive")},onOpen:function(){i("awaiting input")},children:[Object(R.jsx)(h.a,{icon:"trash",content:"Delete codingjob ".concat(e.name)}),Object(R.jsx)(p.a.Content,{children:Object(R.jsx)("p",{children:"Do you really want to delete this codingjob?"})}),Object(R.jsxs)(p.a.Actions,{children:["error"===o?Object(R.jsx)("div",{children:"Could not delete codingjob for a reason not yet covered in the error handling..."}):null,"pending"===o?Object(R.jsx)(xe.a,{active:!0,inverted:!0,children:Object(R.jsx)(me.a,{content:"Creating codingjob"})}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(v.a,{color:"red",onClick:c,children:[Object(R.jsx)(K.a,{name:"remove"})," No"]}),Object(R.jsxs)(v.a,{color:"green",onClick:c,children:[Object(R.jsx)(K.a,{name:"checkmark"})," Yes"]})]})]})]}):null},ye=function(){var e=Object(f.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.exists("AmCAT_Annotator");case 2:if(e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.prev=5,r=new T,e.next=9,r.listCodingjobs();case 9:a=e.sent,t(I(a)),a.length>0&&n(Object(k.a)(Object(k.a)({},a[0]),{},{ROW_ID:"0"})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(f.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.exists("AmCAT_Annotator");case 2:if(e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.prev=5,r=new T,e.next=9,r.listDocuments(t);case 9:a=e.sent,n(L(a)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(e){var t,n=e.type,a=void 0===n?"table":n,o=Object(u.c)((function(e){return e.codingjobs})),i=Object(u.c)((function(e){return e.codingjob})),c=Object(u.b)(),s=Object(r.useState)(i),l=Object(b.a)(s,2),d=l[0],j=l[1];if(Object(r.useEffect)((function(){c(z(d))}),[d,c]),Object(r.useEffect)((function(){i?Ce(i,c):(j(null),c(L([])))}),[i,c]),Object(r.useEffect)((function(){0===o.length&&ye(c,j)}),[o,c]),"table"===a){return Object(R.jsxs)(ne.a,{style:{border:"0"},children:[Object(R.jsxs)(v.a.Group,{widths:"2",children:[Object(R.jsx)(ke,{}),Object(R.jsx)(we,{})]}),Object(R.jsx)(ee.a,{style:{marginTop:"30px",overflow:"auto",width:"800px"},children:Object(R.jsx)(Oe,{columns:[{Header:"Select Index",accessor:"name",headerClass:"thirteen wide"}],data:o||[],selectedRow:d,setSelectedRow:j,defaultSize:15})})]})}if("dropdown"===a){return Object(R.jsx)(se.a,{inline:!0,search:!0,options:(t=o,t.map((function(e){return{key:e.job_id,text:e.name,value:e.name}}))),value:i?i.name:null,onChange:function(e,t){return function(e){if(e&&o.length>0){var t=o.findIndex((function(t){return t.name===e}));j(Object(k.a)(Object(k.a)({},o[t]),{},{ROW_ID:t.toString()}))}else j(null);console.log(d)}(t.value)}})}return null},Ee=[{Header:"title",accessor:"title",headerClass:"six wide"},{Header:"text",accessor:"text",headerClass:"four wide"},{Header:"annotations",accessor:"annotations",headerClass:"four wide"},{Header:"meta",accessor:"meta",headerClass:"four wide"}],Te=function(e){var t=e.width,n=Object(u.c)((function(e){return e.codingjob})),a=Object(u.c)((function(e){return e.document})),o=Object(u.c)((function(e){return e.documents})),i=Object(u.b)(),c=Object(r.useState)(a),s=Object(b.a)(c,2),l=s[0],d=s[1];return Object(r.useEffect)((function(){i(function(e){return{type:"SELECT_ARTICLE",payload:e}}(l))}),[l,i]),n?Object(R.jsx)(Oe,{columns:Ee,data:o,selectedRow:l,setSelectedRow:d,width:t,defaultSize:15}):null},Re=function(){return Object(R.jsx)(ee.a,{style:{marginTop:"30px",overflow:"auto"},children:Object(R.jsx)(Te,{width:"800px"})})},_e=n(328),De=n(210),Ae=function(e){var t=e.data,n=e.codingjob,a=e.fileRef,o=Object(u.c)((function(e){return e.db})),i=Object(r.useState)([]),c=Object(b.a)(i,2),s=c[0],l=c[1],d=Object(r.useState)(null),p=Object(b.a)(d,2),h=p[0],O=p[1],g=Object(r.useState)(null),x=Object(b.a)(g,2),m=x[0],k=x[1],w=Object(r.useState)(null),y=Object(b.a)(w,2),C=y[0],S=y[1],E=Object(u.b)();Object(r.useEffect)((function(){if(t.length<=1)return O(null),k(null),S(null),void l([]);l(t[0].data.map((function(e){return{key:e,value:e,text:e}}))),O(t[0].data.includes("title")?"title":null),k(t[0].data.includes("text")?"text":null),S(t[0].data.includes("annotations")?"annotations":null)}),[t]);var T=function(e,t,n,r){var a=e[0].data;return e.slice(1).map((function(e){var o=e.data.reduce((function(e,o,i){var c=a[i];return c===t?e.title=o:c===n?e.text=o:c===r?e.annotations=o:e.meta[c]=o,e}),{meta:{},annotations:""});return o.meta=JSON.stringify(o.meta,null,2),o}))},_=function(){var e=Object(f.a)(j.a.mark((function e(){var r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=T(t,h,m,C),e.next=4,o.createDocuments(n,r);case 4:return e.next=6,o.listDocuments(n);case 6:return i=e.sent,e.next=9,E(L(i));case 9:a.current.removeFile(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return t.length<=1?null:Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(ge.a,{children:[Object(R.jsxs)(ge.a.Group,{children:[Object(R.jsx)(ge.a.Field,{control:_e.a,placeholder:"title column",options:s,value:h,onChange:function(e,t){return O(t.value)}}),Object(R.jsx)(ge.a.Field,{control:_e.a,placeholder:"text column",options:s,value:m,onChange:function(e,t){return k(t.value)}})]}),Object(R.jsxs)(ge.a.Group,{children:[Object(R.jsx)(ge.a.Field,{control:_e.a,clearable:!0,placeholder:"annotations (optional)",options:s,value:C,onChange:function(e,t){return S(t.value)}}),Object(R.jsxs)(ge.a.Field,{control:v.a,fluid:!0,onClick:_,disabled:!h||!m,children:[Object(R.jsx)(K.a,{name:"upload"}),"Upload"]})]})]})})},Ne=function(e){var t=e.data,n=function(e){return e.map((function(e){return Object(R.jsx)(fe.a.Cell,{children:Object(R.jsx)("span",{title:e,children:e})})}))};return t.length<=1?null:Object(R.jsxs)(ee.a,{style:{marginTop:"2em"},children:[Object(R.jsxs)(fe.a,{fixed:!0,singleLine:!0,basic:"very",children:[Object(R.jsx)(fe.a.Header,{children:Object(R.jsx)(fe.a.Row,{children:function(e){return e[0].data.map((function(e){return Object(R.jsx)(fe.a.HeaderCell,{children:Object(R.jsx)("span",{title:e,children:e})})}))}(t)})}),Object(R.jsx)(fe.a.Body,{children:function(e,t){return e.slice(0,t+1).slice(1).map((function(e){return Object(R.jsx)(fe.a.Row,{children:n(e.data)})}))}(t,5)})]}),t.length>5?Object(R.jsxs)(h.a,{align:"center",children:[t.length-1-5," more rows"]}):null]})},ze=function(e){e.setActive;var t=Object(u.c)((function(e){return e.codingjob})),n=Object(r.useState)([]),a=Object(b.a)(n,2),o=a[0],i=a[1],c=Object(r.useRef)();return t?Object(R.jsxs)(te.a,{stackable:!0,style:{marginTop:"4.3em"},children:[Object(R.jsxs)(te.a.Row,{children:[Object(R.jsxs)(te.a.Column,{floated:"right",width:4,children:[" ",Object(R.jsx)(De.a,{ref:c,onFileLoad:function(e){return i(e)},addRemoveButton:!0,onRemoveFile:function(){return i([])},children:Object(R.jsx)("span",{children:"Click to upload"})})]}),Object(R.jsx)(te.a.Column,{floated:"right",width:10,children:Object(R.jsx)(Ae,{data:o,codingjob:t,fileRef:c})})]}),Object(R.jsx)(te.a.Row,{children:Object(R.jsx)(te.a.Column,{children:Object(R.jsx)(Ne,{data:o})})})]}):null},Ie=n(217),Le=(n(307),function(e){var t=e.fields,n=e.fieldValues,r=e.setFieldValues,a=function(e,t){var a=Object(k.a)({},n);a[e]=t,r(a)};return t?Object.keys(t).map((function(e){return"text"===t[e]?Object(R.jsx)(ge.a.TextArea,{value:n[e]?n[e]:"",onChange:function(t,n){return a(e,n.value)},label:e},e):"date"===t[e]?Object(R.jsx)(ge.a.Field,{children:Object(R.jsx)(Ie.a,{label:e,value:n[e]?n[e]:"",onChange:function(t,n){return a(e,n.value)}},e)}):"keyword"===t[e]?Object(R.jsxs)(ge.a.Field,{children:[Object(R.jsx)("label",{children:e}),Object(R.jsx)("input",{value:n[e]?n[e]:"",onChange:function(t){return a(e,t.target.value)}})]},e):null})):null}),Be=function(){var e=Object(u.c)((function(e){return e.codingjob})),t=Object(u.b)(),n=Object(r.useState)({}),a=Object(b.a)(n,2),o=a[0],i=a[1],c=function(){var n=Object(f.a)(j.a.mark((function n(){var r,a,c,s,u,l;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(r=Object(k.a)({},o),a=0,c=Object.keys(r);a<c.length;a++)("date"===(s=c[a])||/_date$/.test(s))&&(r[s]=r[s].toISOString());return n.prev=2,u=new T,n.next=6,u.createDocuments(e,[r]);case 6:return n.next=8,u.listDocuments(e);case 8:return l=n.sent,n.next=11,t(L(l));case 11:i({}),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(2),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[2,14]])})));return function(){return n.apply(this,arguments)}}();return e?Object(R.jsxs)(ge.a,{style:{marginTop:"3em"},children:[Object(R.jsx)(Le,{fields:{title:"text",text:"text",annotations:"text"},fieldValues:o,setFieldValues:i}),e?Object(R.jsx)(v.a,{primary:!0,onClick:c,children:"Create document"}):null]}):null},Pe=function(){var e=Object(r.useState)("details"),t=Object(b.a)(e,2),n=t[0],a=t[1];return Object(R.jsxs)(te.a,{stackable:!0,style:{marginTop:"3em"},children:[Object(R.jsx)(te.a.Column,{floated:"left",width:5,children:Object(R.jsx)(Se,{type:"table"})}),Object(R.jsx)(te.a.Column,{width:11,children:Object(R.jsxs)(ne.a,{style:{border:0},children:[Object(R.jsxs)(l.a,{pointing:!0,secondary:!0,children:[Object(R.jsx)(l.a.Item,{name:"details",active:"details"===n,onClick:function(e,t){return a(t.name)}}),Object(R.jsx)(l.a.Item,{name:"upload",active:"upload"===n,onClick:function(e,t){return a(t.name)}}),Object(R.jsx)(l.a.Item,{name:"create",active:"create"===n,onClick:function(e,t){return a(t.name)}})]}),function(e){switch(e){case"details":return Object(R.jsx)(Re,{});case"upload":return Object(R.jsx)(ze,{});case"create":return Object(R.jsx)(Be,{});default:return null}}(n)]})})]})},Fe=n(346),Ge=n(174),Ke=n(151),He=function(){var e=Object(f.a)(j.a.mark((function e(t,n){var r,a,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new T;case 2:return r=e.sent,a=new Set,o=Object.values(n).reduce((function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n],i={code:o,offset:t[o].offset,length:t[o].length},c=JSON.stringify(i);a.has(c)||(a.add(c),e.push(i))}return e}),[]),e.next=7,r.writeValue({doc_id:t.doc_id},"annotations",JSON.stringify(o,null,2));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Me=function(e,t,n){var r,a={},o=[],i=Object(Ke.a)(e);try{for(i.s();!(r=i.n()).done;){var c=r.value;Je(c,t,a,o)}}catch(l){i.e(l)}finally{i.f()}for(var s=0,u=o;s<u.length;s++){We(u[s],n)}},Je=function(e,t,n,r){for(var a=e.offset.start,o=e.offset.start+e.offset.length,i=a;i<=o;i++)if(t[i]){var c,s=Object(Ke.a)(t[i].start);try{for(s.s();!(c=s.n()).done;){var u=c.value;n[u]={index:e.offset.index,group:u,offset:a,length:null,span:[e.offset.index]}}}catch(f){s.e(f)}finally{s.f()}var l,d=Object(Ke.a)(t[i].end);try{for(d.s();!(l=d.n()).done;){var j=l.value;n[j].span.push(e.offset.index),n[j].length=e.offset.start+e.offset.length-n[j].offset,r.push(n[j]),delete n[j]}}catch(f){d.e(f)}finally{d.f()}}},We=function(e,t){for(var n=[],r=e.span[0];r<=e.span[1];r++){var a=Object(k.a)({},e);a.index=r,n.push(a)}t(G(n))},Ue=function(e){var t=e.tokens,n=e.doc,a=Object(u.c)((function(e){return e.spanAnnotations})),o=Object(r.useState)(!1),i=Object(b.a)(o,2),c=i[0],s=i[1],l=Object(u.b)();return Object(r.useEffect)((function(){s(!1)}),[n]),Object(r.useEffect)((function(){t.length>0&&n.annotations&&!c&&(Me(t,n.annotations,l),s(!0))}),[c,t,n,l]),Object(r.useEffect)((function(){c&&He(n,a)}),[c,n,a]),Object(R.jsx)("div",{})},Ve=(n(308),n(216)),Ye=n(332),qe=n(336),Ze=n(338),$e=n(214),Qe=n.n($e),Xe=function(e,t){var n=e;return n?Object.keys(n).filter((function(e){return e!==t})).map(et):[et(null)]},et=function(e){var t=e;return e&&"null"!==e||(t="Not yet assigned"),{key:t,text:t,value:t}},tt=function(e,t,n,r,a,o){return t.filter((function(e){return e!==n&&"Not yet assigned"!==e})).map((function(t){return Object(R.jsx)(v.a,{style:{backgroundColor:rt(t,r)},value:t,onClick:function(t,r){return nt(e,n,r.value,o)},children:t},t)}))},nt=function(e,t,n,r,a){var o=t,i=e;if(!i)return null;var c={index:i[o].index,group:o,offset:i[o].offset,length:i[o].length,span:i[o].span},s=Object(k.a)({},c);if(s.span=[s.index,s.index],a({type:"RM_ANNOTATIONS",payload:[s]}),n===o)return a(F(null)),null;for(var u=[],l=c.span[0];l<=c.span[1];l++){var d=Object(k.a)({},c);d.group=n,d.index=l,u.push(d)}a(G(u)),a(function(e){return{type:"APPEND_CODE_HISTORY",payload:{code:e,n:arguments.length>1&&void 0!==arguments[1]?arguments[1]:5}}}(n)),Object.keys(i).includes(null)?r(null):r(n),a(F(null))},rt=function(e,t){var n=t.find((function(t){return t.value===e}));return n?n.color:"lightgrey"},at=function(e){var t=e.index,n=e.children,a=Object(u.c)((function(e){return e.codes})),o=Object(u.c)((function(e){return e.codeHistory})),i=Object(u.c)((function(e){return e.spanAnnotations[t]})),c=Object(u.c)((function(e){return e.codeSelectorTrigger===t})),s=Object(r.useRef)(null),l=Object(r.useState)(null),d=Object(b.a)(l,2),j=d[0],f=d[1],p=!0,h=Object(u.b)();Object(r.useEffect)((function(){if(j)return null;if(!i)return null;var e=i;e&&void 0!==e&&(Object.keys(e).includes("Not yet assigned")?f("Not yet assigned"):f(Object.keys(e)[0]))}),[j,t,i]),Object(r.useEffect)((function(){return c?(window.addEventListener("keydown",O),h(N(!0))):(window.removeEventListener("keydown",O),h(N(!1))),function(){window.removeEventListener("keydown",O),h(N(!1))}}),[c,h]);var O=function(e){s.current&&s.current.click()};return console.log(c),c?Object(R.jsx)(Ye.a,{trigger:n,flowing:!0,hoverable:!0,wide:!0,open:c,mouseLeaveDelay:1e3,position:"top left",children:Object(R.jsx)("div",{children:Object(R.jsxs)(qe.a.Group,{vertical:!0,children:[Object(R.jsx)(qe.a,{active:!0,children:Object(R.jsxs)(qe.a.Content,{children:[Object(R.jsx)(qe.a.Title,{children:"Current code"}),Object(R.jsx)(qe.a.Description,{children:Object(R.jsxs)(v.a.Group,{children:[Object(R.jsx)(v.a,{icon:"trash",size:"mini",onClick:function(e,t){return nt(j)}}),Object(R.jsx)(v.a,{style:{backgroundColor:rt(j,a)},children:Object(R.jsx)(se.a,{text:j,options:Xe(i,j),value:j,onChange:function(e,t){return f(t.value)}})})]})})]})}),Object(R.jsx)(qe.a,{children:Object(R.jsxs)(qe.a.Content,{children:[Object(R.jsx)(qe.a.Title,{children:"Set new code"}),Object(R.jsxs)(qe.a.Description,{children:[Object(R.jsx)(v.a.Group,{vertical:!0,compact:!0,widths:"1",children:tt(i,o,j,a,f,h)}),"\xa0\xa0",Object(R.jsx)(Ze.a,{innerRef:s,children:Object(R.jsx)(se.a,{compact:!0,options:a,placeholder:p?"Search or create ":"Search ",widths:1,search:!0,selection:!0,allowAdditions:p,additionPosition:"bottom",onAddItem:function(e,t){h(function(e){return{type:"SET_CODES",payload:e}}([{key:t.value,text:t.value,value:t.value,color:Qe()({seed:t.value,luminosity:"bright"})}].concat(Object(Ve.a)(a))))},selectOnNavigation:!1,minCharacters:0,autoComplete:"on",searchInput:{autoFocus:!1},onChange:function(e,t){return nt(t.value)}})})]})]})})]})})}):n},ot=a.a.forwardRef((function(e,t){var n=e.token,r="token";return Object(u.c)((function(e){if(0===e.tokenSelection.length)return!1;var t=Object(b.a)(e.tokenSelection,2),r=t[0],a=t[1];if(r>a){var o=[r,a];a=o[0],r=o[1]}return n.offset.index>=r&&n.offset.index<=a}))&&(r+=" selected"),Object(R.jsx)("span",{ref:t,className:r,tokenindex:n.offset.index,children:Object(R.jsx)(it,{token:n})})})),it=function(e){var t=e.token,n=Object(u.c)((function(e){return e.spanAnnotations[t.offset.index]})),r=Object(u.c)((function(e){return e.codes})),a=Object(u.b)();if(Object(u.c)((function(e){return JSON.stringify(e.spanAnnotations[t.offset.index])})),!n)return Object(R.jsx)(R.Fragment,{children:t.pre+t.text+t.post});var o=function(e,t){var n=t.find((function(t){return t.value===e}));return n?n.color:"lightgrey"},i=Object.keys(n),c=null;if(1===i.length)c=o(i[0],r);else{var s=i.map((function(e){return o(e,r)}));c="linear-gradient(".concat(s.join(", "),")")}var l=!Object.values(n).some((function(e){return e.span[0]!==e.index})),d=!Object.values(n).some((function(e){return e.span[1]!==e.index})),j=Object.values(n).some((function(e){return e.span[0]===e.index})),f=Object.values(n).some((function(e){return e.span[1]===e.index})),b="annotatedToken";return l&&(b+=" allLeft"),j&!l&&(b+=" anyLeft"),d&&(b+=" allRight"),f&!d&&(b+=" anyRight"),Object(R.jsxs)(R.Fragment,{children:[l?t.pre:null,Object(R.jsx)(at,{index:t.offset.index,children:function(e){return Object(R.jsxs)("span",{className:e,onContextMenu:function(e){e.preventDefault(),a(F(t.offset.index))},style:{background:c},children:[l&&d?t.text:null,l&&!d?t.text+t.post:null,d&&!l?t.pre+t.text:null,l||d?null:t.pre+t.text+t.post]})}(b)}),d?t.post:null]})},ct=a.a.memo(ot),st=n(173),ut=n(215);st.a.extend(ut.a);var lt=function(e){var t=e.text,n=e.setTokens,a=Object(r.useState)(null),o=Object(b.a)(a,2),i=o[0],c=o[1];return Object(r.useEffect)((function(){var e=dt(t),r=Object(b.a)(e,2),a=r[0],o=r[1];c(a),n(o)}),[t,n]),null===t?null:Object(R.jsx)(ee.a,{text:!0,children:Object(R.jsx)(ne.a,{style:{border:"0"},children:i})})},dt=function(e){var t=[];return[st.a.tokenize(e).paragraphs().json({offset:!0}).map((function(e,n){return jt(e,n,t)})),t]},jt=function(e,t,n){var r=function(e){return e.sentences.map((function(e){return e.map((function(e){return ft(e,n)}))}))};return Object(R.jsx)("span",{style:{marginTop:"1em",display:"table"},children:0===t?Object(R.jsx)("h2",{children:r(e)}):r(e)},t)},ft=function(e,t){return Object(R.jsx)("span",{className:"sentence",children:function(e){return e.terms.map((function(e){return e.ref=a.a.createRef(),t.push(e),Object(R.jsx)(ct,{ref:e.ref,token:e},e.offset.index)}))}(e)},e.offset.index)},bt=a.a.memo(lt),pt=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],ht=function(e,t,n){var r=Object(b.a)(t,2),a=r[0],o=r[1];if(a>o){var i=[o,a];a=i[0],o=i[1]}for(var c=[],s=a;s<=o;s++)c.push({index:s,group:"Not yet assigned",offset:e[a].offset.start,length:e[o].offset.length+e[o].offset.start-e[a].offset.start,span:[a,o]});n(G(c)),n({type:"CLEAR_TOKEN_SELECTION"}),n(F(o))},vt=function(e,t,n,r,a){var o=n.position;return"ArrowRight"===t&&o++,"ArrowLeft"===t&&o--,"ArrowUp"===t&&(o=Ot(e,n,"up")),"ArrowDown"===t&&(o=Ot(e,n,"down")),o>n.ntokens&&(o=n.ntokens),o<0&&(o=0),n.position!==o&&(a(B(o)),a(P(o,r))),e[o].ref.current.scrollIntoView({block:"center"}),o},Ot=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"up",a=e[t.position].ref.current.getBoundingClientRect(),o=e[t.startposition].ref.current.getBoundingClientRect();if("up"===r){for(var i=t.position;i>=0;i--)if((n=e[i].ref.current.getBoundingClientRect()).y<a.y&&n.x<o.x)return i;return 0}if("down"===r){for(var c=t.position;c<e.length;c++)if((n=e[c].ref.current.getBoundingClientRect()).y>a.y&&n.x>o.x)return c;return e.length-1}},gt=function(e,t){var n=parseInt(t.getAttribute("tokenindex"));return{index:n,offset:e[n].offset.start,length:e[n].offset.length}},xt=function(e,t){return"token"===t.className||"token selected"===t.className?gt(e,t):t.parentNode&&"token"===t.parentNode.className?gt(e,t.parentNode):null},mt=function(e){var t=e.doc,n=Object(u.c)((function(e){return e.currentToken})),a=Object(u.c)((function(e){return e.tokenSelection})),o=Object(u.c)((function(e){return e.eventsBlocked})),i=Object(r.useState)(!1),c=Object(b.a)(i,2),s=c[0],l=c[1],d=Object(r.useState)(null),j=Object(b.a)(d,2),f=j[0],p=j[1],h=Object(r.useState)(!1),v=Object(b.a)(h,2),O=v[0],g=v[1],x=Object(r.useState)(null),m=Object(b.a)(x,2),k=m[0],w=m[1],y=Object(r.useState)([]),C=Object(b.a)(y,2),S=C[0],E=C[1],T=Object(u.b)();Object(r.useEffect)((function(){T({type:"CLEAR_SPAN_ANNOTATIONS"})}),[t,T]),Object(r.useEffect)((function(){return window.addEventListener("mousedown",A),window.addEventListener("mousemove",N),window.addEventListener("mouseup",z),window.addEventListener("contextmenu",I),function(){window.removeEventListener("mousedown",A),window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",z),window.removeEventListener("contextmenu",I)}}));var _=Object(r.useCallback)((function(e){"Control"!==e.key&&"Shift"!==e.key?pt.includes(e.key)&&(w(!1),p(null)):g(!1)}),[]),D=Object(r.useCallback)((function(e){if("Control"!==e.key&&"Shift"!==e.key){if(pt.includes(e.key)){if(e.preventDefault(),e.repeat)return;p({position:n,startposition:n,ntokens:S.length,counter:1}),w(e.key)}if(a.length>0)(32===e.keyCode||13===e.keyCode)&&(e.preventDefault(),ht(S,a,T))}else{if(e.repeat)return;g(!0)}}),[n,a,S,T]);Object(r.useEffect)((function(){return o?(window.removeEventListener("keydown",D),window.removeEventListener("keyup",_),g(!1),w(!1)):(window.addEventListener("keydown",D),window.addEventListener("keyup",_)),function(){window.removeEventListener("keydown",D),window.removeEventListener("keyup",_)}}),[o,D,_]),Object(r.useEffect)((function(){if(f&&k){var e=vt(S,k,f,O,T),t=Math.max(5,100/Math.ceil(f.counter/5));1===f.counter&&(t=150),setTimeout((function(){p({position:e,startposition:f.startposition,ntokens:f.ntokens,counter:f.counter+1})}),t)}}),[S,f,k,O,T]);var A=function(e){if(1!==e.which)return null;e.preventDefault(),l(!0),T({type:"CLEAR_TOKEN_SELECTION"})},N=function(e){if(1!==e.which)return null;s&&L(e)},z=function(e){if(1!==e.which)return null;var t=L(e);window.getSelection().empty(),l(!1),a.length>0?ht(S,a,T):t&&ht(S,[t,t],T)},I=function(e){if(2===e.button)return null;e.preventDefault(),e.stopPropagation()},L=function(e){var t=xt(S,e.originalTarget);return t?(T(B(t.index)),T(P(t.index,!0)),t.index):null};return t?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(bt,{text:t.text,setTokens:E}),Object(R.jsx)(Ue,{tokens:S,doc:t})]}):null},kt=function(){var e=Object(f.a)(j.a.mark((function e(t,n,r){var a,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return a=new T,e.next=4,a.listDocuments(t);case 4:o=e.sent,r(o),o.length>0?n({doc_id:o[0].doc_id,text:o[0].title+"\n\n"+o[0].text,annotations:yt(o[0].annotations)}):n(null);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),wt=function(){var e=Object(f.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new T,e.next=3,r.getDocument(n);case 3:a=e.sent,t({doc_id:a.doc_id,text:a.title+"\n\n"+a.text,annotations:yt(a.annotations)});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),yt=function(e){return e&&""!==e?JSON.parse(e).reduce((function(e,t){return e[t.offset]||(e[t.offset]={start:[],end:[]}),e[t.offset+t.length]||(e[t.offset+t.length]={start:[],end:[]}),e[t.offset].start.push(t.code),e[t.offset+t.length].end.push(t.code),e}),{}):{}},Ct=function(e){return e.map((function(e,t){return{key:t,text:e.title,value:e.doc_id}}))},St="/amcat4annotator",Et=[{label:"Create",path:St+"/create",Component:Pe},{label:"Annotate",path:St+"/annotate",Component:function(){var e=Object(u.c)((function(e){return e.codingjob})),t=Object(r.useState)(null),n=Object(b.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)([]),c=Object(b.a)(i,2),s=c[0],l=c[1];Object(r.useEffect)((function(){kt(e,o,l)}),[e]);return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(te.a,{children:[Object(R.jsx)(te.a.Row,{children:Object(R.jsxs)(Fe.a,{children:[Object(R.jsx)(Ge.a,{link:!0,children:Object(R.jsx)(Se,{type:"dropdown"})}),Object(R.jsx)(Fe.a.Divider,{}),Object(R.jsx)(Ge.a,{link:!0,children:function(e,t){var n=Ct(t);return Object(R.jsx)(se.a,{inline:!0,search:!0,onChange:function(t,n){wt(e,n.value)},options:n,value:a?a.doc_id:null})}(o,s)})]})}),Object(R.jsxs)(te.a.Row,{children:[Object(R.jsx)(te.a.Column,{width:12,children:Object(R.jsx)(mt,{doc:a||null})}),Object(R.jsx)(te.a.Column,{width:4})]})]})})}}],Tt=function(){var e;return Object(R.jsxs)(c.a,{children:[Object(R.jsx)(Q,{items:Et,host:"https://ccs-amsterdam.github.io",homepage:St}),Object(R.jsx)(X.a,{}),Object(R.jsx)(ee.a,{style:{marginTop:"3em"},children:Object(R.jsxs)(s.d,{children:[Object(R.jsx)(s.b,{exact:!0,path:St,render:function(){return Object(R.jsx)(oe,{items:Et})}}),(e=Et,e.map((function(e){return Object(R.jsx)(ce,{path:e.path,homepage:St,Component:e.Component},e.path)})))]})})]})},Rt=n(81),_t=function(e,t,n){return n&&0!==e.length?[e[0],t]:[t,t]},Dt=function(e,t,n){for(var r in t){var a=t[r];if(e[a.index]&&e[a.index][a.group]){for(var o=e[a.index][a.group].span,i=o[0];i<=o[1];i++)e[i]&&e[i][a.group]&&(delete e[i][a.group],0===Object.keys(e[i]).length&&delete e[i]);if(a.span[0]===a.span[1])continue}n||(e[a.index]||(e[a.index]={}),e[a.index][a.group]={index:a.index,span:[a.span[0],a.span[1]],offset:a.offset,length:a.length})}return e},At=[{key:"Mark Rutte",text:"Mark Rutte",value:"Mark Rutte",color:"#40a31f"},{key:"Sigrid Kaag",text:"Sigrid Kaag",value:"Sigrid Kaag",color:"#f2db5c"}],Nt=Object(Rt.b)({db:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DB":return t.payload;case"RESET_DB":return null;default:return e}},eventsBlocked:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BLOCK_EVENTS":return t.payload;default:return e}},codingjob:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_CODINGJOB":return t.payload;case"RESET_DB":return null;default:return e}},codingjobs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CODINGJOBS":return t.payload;case"RESET_DB":return[];default:return e}},document:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_DOCUMENT":return t.payload;case"RESET_DB":return[];default:return e}},documents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DOCUMENTS":return t.payload;case"RESET_DB":return[];default:return e}},tokenIndices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN_INDICES":return t.payload;case"RESET_DB":return null;default:return e}},currentToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_TOKEN":return t.payload;case"RESET_DB":return 0;default:return e}},codeSelectorTrigger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRIGGER_CODESELECTOR":return t.payload;default:return e}},tokenSelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN_SELECTION":return _t(e,t.index,t.add);case"CLEAR_TOKEN_SELECTION":case"RESET_DB":return[];default:return e}},spanAnnotations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_ANNOTATIONS":return Dt(Object(k.a)({},e),t.payload,!1);case"RM_ANNOTATIONS":return Dt(Object(k.a)({},e),t.payload,!0);case"CLEAR_SPAN_ANNOTATIONS":case"RESET_DB":return{};default:return e}},codes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CODES":return t.payload;case"RESET_DB":return[];default:return e}},codeHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPEND_CODE_HISTORY":var n=e.filter((function(e){return e!==t.payload.code})).slice(0,t.payload.n-1);return n.unshift(t.payload.code),n;case"RESET_DB":return[];default:return e}}}),zt=Object(Rt.c)(Nt);i.a.render(Object(R.jsx)(a.a.StrictMode,{children:Object(R.jsx)(u.a,{store:zt,children:Object(R.jsx)(Tt,{})})}),document.querySelector("#root"))}},[[310,1,2]]]);
//# sourceMappingURL=main.1606cd76.chunk.js.map